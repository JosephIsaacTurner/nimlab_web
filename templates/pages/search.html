{% extends '_base.html' %}

{% load crispy_forms_tags %}

{% block content %}

<div class="accordion" id="searchAccordion">
  {% for field in form.visible_fields %}
  <div class="accordion-item">
    <h2 class="accordion-header" id="heading{{ forloop.counter }}">
      <button class="accordion-button{% if not forloop.first %} collapsed{% endif %}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="{{ forloop.first }}" aria-controls="collapse{{ forloop.counter }}">
        {{ field.label }}
      </button>
    </h2>
    <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse{% if forloop.first %} show{% endif %}" aria-labelledby="heading{{ forloop.counter }}" data-bs-parent="#searchAccordion">
      <div class="accordion-body">
        {{ field|as_crispy_field }}
      </div>
    </div>
  </div>
  {% endfor %}
  <input type="submit" value="Search" class="btn btn-primary my-3">
</div>

{% if results %}
  <ul>
    {% for dataset in results %}
      <li>{{ dataset.dataset_name }}</li>
    {% endfor %}
  </ul>
{% endif %}

{% endblock %}
